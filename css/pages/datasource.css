/* ============================================================
   数据中台 V4.0 - 数据源管理页面
   布局：左侧（Tab + 目录树） | 右侧（工具栏 + 表格）
   ============================================================ */

/* ---- 页面整体：左右布局 ---- */
.page-datasource {
  display: flex;
  height: 100%;
  background: #fff;
  overflow: hidden;
}

/* ============================================================
   左侧面板：Tab切换 + 目录树
   ============================================================ */
.ds-left-panel {
  width: 230px;
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  border-right: 1px solid #e8edf3;
  background: #fff;
}

/* 标签页（横排在左侧顶部） */
.ds-tabs {
  display: flex;
  align-items: center;
  gap: 0;
  border-bottom: 1px solid #e8edf3;
  flex-shrink: 0;
  background: #f8fafc;
}
.ds-tab {
  flex: 1;
  text-align: center;
  padding: 10px 0;
  font-size: 13px;
  color: var(--text-secondary);
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: var(--transition);
  font-weight: 500;
  white-space: nowrap;
}
.ds-tab:hover { color: var(--primary); }
.ds-tab.active {
  color: var(--primary);
  border-bottom-color: var(--primary);
  font-weight: 600;
  background: #fff;
}

/* 目录树搜索栏 */
.ds-tree-search {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 10px;
  border-bottom: 1px solid #e8edf3;
  flex-shrink: 0;
}
.ds-tree-search-input {
  flex: 1;
  height: 28px;
  padding: 0 8px 0 28px;
  border: 1px solid #d9d9d9;
  border-radius: 4px;
  font-size: 12px;
  outline: none;
  color: var(--text-primary);
  background: #fff url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' fill='%23bbb' viewBox='0 0 16 16'%3E%3Cpath d='M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z'/%3E%3C/svg%3E") 8px center no-repeat;
  transition: border-color 0.2s;
}
.ds-tree-search-input:focus {
  border-color: var(--primary);
}
.ds-tree-search-input::placeholder {
  color: #bbb;
}
.filter-icon {
  color: var(--primary);
  cursor: pointer;
  font-size: 15px;
  flex-shrink: 0;
}

/* 树形滚动区域 */
.ds-tree-scroll {
  flex: 1;
  overflow-y: auto;
  padding: 8px 0;
}
.ds-tree-scroll::-webkit-scrollbar { width: 4px; }
.ds-tree-scroll::-webkit-scrollbar-thumb { background: #ddd; border-radius: 4px; }

/* 可切换的树内容容器 */
.ds-tree-content {
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow: hidden;
}

/* ============================================================
   右侧面板：工具栏 + 表格
   ============================================================ */
.ds-right-panel {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  min-width: 0;
  background: #fff;
}

/* 操作按钮栏：一行展示，左按钮 + 右搜索条件 */
.ds-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
  gap: 12px;
  border-bottom: 1px solid #e8edf3;
  flex-shrink: 0;
  flex-wrap: nowrap;
  background: #fff;
  min-height: 46px;
}
.ds-toolbar-left {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-shrink: 0;
  flex-wrap: nowrap;
}
.ds-toolbar-right {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-shrink: 0;
  flex-wrap: nowrap;
  margin-left: auto;
}

/* ---- 筛选器 ---- */
.ds-filter-group { display: flex; align-items: center; gap: 4px; font-size: 12px; color: var(--text-secondary); }
.filter-label { white-space: nowrap; }
.filter-select {
  height: 28px; padding: 0 6px;
  border: 1px solid #d9d9d9; border-radius: 3px;
  font-size: 12px; color: var(--text-primary);
  background: #fff; outline: none; cursor: pointer; min-width: 70px;
}
.filter-select:focus { border-color: var(--primary); }

/* ---- 搜索框 ---- */
.ds-search-box { display: flex; align-items: center; gap: 4px; }
.ds-search-input {
  height: 28px; padding: 0 8px;
  border: 1px solid #d9d9d9; border-radius: 3px;
  font-size: 12px; outline: none; width: 150px;
  color: var(--text-primary);
}
.ds-search-input:focus { border-color: var(--primary); }
.ds-search-input::placeholder { color: #bbb; }

/* ---- 表格容器 ---- */
.ds-table-wrap {
  flex: 1;
  overflow: auto;
}

/* ============================================================
   树节点样式
   ============================================================ */
.ds-tree { padding: 0 4px; }
.ds-tree ul { list-style: none; padding-left: 18px; }

.tree-node {
  display: flex; align-items: center; flex-wrap: wrap;
  padding: 6px 8px; border-radius: 4px;
  cursor: pointer; font-size: 12px;
  color: var(--text-secondary); transition: background 0.15s;
  margin: 1px 0;
}
.tree-node > .tree-children { display: none; }
.tree-node.open > .tree-children { display: block; }
.tree-node > span, .tree-node > i { vertical-align: middle; }
.tree-node:hover { background: #edf3fb; }
.tree-node.active { background: #e6f0ff; color: var(--primary); font-weight: 500; }
.tree-node.active .tree-icon { color: var(--primary); }

.tree-toggle { width: 16px; text-align: center; font-size: 10px; color: #aaa; flex-shrink: 0; cursor: pointer; }
.tree-icon { font-size: 13px; color: #faad14; margin-right: 4px; flex-shrink: 0; }
.tree-icon.bi-database { color: var(--primary); font-size: 12px; }
.leaf-indent { margin-left: 16px; }
.tree-text { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; line-height: 1.4; }
.tree-children { width: 100%; padding-left: 20px; }

/* ============================================================
   数仓分层标签
   ============================================================ */
.dw-layer-tag {
  display: inline-block;
  padding: 1px 6px; border-radius: 3px;
  font-size: 10px; font-weight: 700;
  font-family: 'Consolas', 'Monaco', monospace;
  margin-right: 4px; letter-spacing: 0.5px;
  vertical-align: middle;
}
